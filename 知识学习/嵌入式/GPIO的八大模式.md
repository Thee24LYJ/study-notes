[一篇文章将三极管讲透：三极管从原理到应用，从参数到特性，从入门到精通 -CSDN 博客](https://blog.csdn.net/qq_40693786/article/details/134416264)
[精辟透彻！三极管的原理、参数 、应用、检测…… - 21ic 电子网](https://www.21ic.com/article/880450.html)
[集成电路(芯片)中 VCC、VDD、VSS、GND 和 AGND 等概念-CSDN 博客](https://blog.csdn.net/vily_lei/article/details/131060131)
[深刻理解 GPIO(上拉输入、下拉输入、模拟输入、浮空输入，开漏输出，推挽输出的区别，以 STM32 为例)-CSDN 博客](https://blog.csdn.net/scarecrow_sun/article/details/120287852)
[关于 GPIO（一）：开漏、推挽、浮空等模式详解 - 小一啊 - 博客园](https://www.cnblogs.com/rushca/p/17720960.html)

> GPIO(General Purpose Input Output)：通用输入输出端口，可以通过软件控制其输入输出，从而实现外部通信、控制以及数据采集功能
> 上拉：通过上拉电阻将一个不确定信号与电源 VCC 相连，将其固定为高电平
> 下拉：通过下拉电阻将一个不确定信号与地 GND 相连，将其固定为低电平
> STM32F1 系列内部 IO 结构图
> ![](https://img2023.cnblogs.com/blog/2563546/202309/2563546-20230921203818191-1378563163.png)

# 一、三极管

> 三极管，全称为半导体三极管，**也称双极型晶体管、晶体三极管**，是一种控制电流的半导体器件。其作用是把微弱信号放大成幅度值较大的电信号，也用作无触点开关；分为 NPN 型和 PNP 型三极管

### 1.1 三极管工作状态

##### 1.1.1 截止状态

加在三极管发射结电压小于 PN 结导通电压时，基极、集电极和发射极电流均为零，此时三极管失去电流放大作用，集电极和发射极相当于断开状态，此时三极管处于截止状态

##### 1.1.2 放大状态

加在三极管发射结电压大于 PN 结导通电压且处于恰当的值时，三极管发射结正向偏置，集电结反向偏置，基极电流控制集电极电流($I_c =I_b *\beta$)，三极管具有**电流放大**作用，此时三极管处于放大状态

##### 1.1.3 饱和导通状态

加在三极管发射结电压大于 PN 结导通电压且基极电流增大到一定程度时，集电极电流不再随着基极电流增大而增大，三极管失去电流放大作用、集电极和发射极之间电压差很小，集电极和发射极间相当于导通状态，此时三极管处于饱和导通状态

# 二、GPIO 输入输出模式

### 2.1 四种输入模式

##### 2.1.1 浮空输入 -> 读取数字信号

关闭上拉和下拉(经过 TTL 施密特触发器)，当 IO 口没有输入时读取的电平是一个不确定的值(即浮空状态，处于高低电平跳变状态)，只有输入一个高低电平后才会保持稳定

##### 2.1.2 上拉输入 -> 读取低电平

关闭下拉，打开上拉(经过 TTL 施密特触发器)，当 IO 口没有输入时读取到高电平，当输入高电平时无法准确判断是否真的有高电平信号输入，但输入低电平可以非常明显的读取到

##### 2.1.3 下拉输入 -> 读取高电平

关闭上拉，打开下拉(经过 TTL 施密特触发器)，当 IO 口没有输入时读取到低电平，当输入低电平时无法准确判断是否真的有低电平信号输入，但输入高电平可以非常明显的读取到

##### 2.1.4 模拟输入 -> 读取模拟信号

关闭上拉下拉(但不经过 TTL 施密特触发器)，此时可以读取到 IO 口上的真实电压(模拟量)

### 2.2 四种输出模式

##### 2.2.1 开漏输出

- 通过 N-MOS 管实现开漏输出，当设定为低电平时，N-MOS 管关闭，此时 IO 口输出电压是不确定的电压(浮空)，当设定为高电平时，N-MOS 管导通，此时 IO 口输出电压为低电平(漏极与源极相同电压)
- 只能输出低电平，不能输出高电平(若需输出高电平则需外接上拉电阻)；但开漏输出具有"线与"功能，一个输出低电平，其余全部相连的 IO 口全为低电平(**拉低总线**)，多用于 IIC 和 SMBUS 总线

##### 2.2.2 推挽输出

> VDD：器件内部工作电压
> VSS：电路公共接地端电压或电源负极
> N-MOS：栅极电压大于源极电压导通，否则截止
> P-MOS：栅极电压小于源极电压导通，否则截止

- 使用 N-MOS 管和 P-MOS 管实现高低电平的输出(其中==上面是 P-MOS 管，下面是 N-MOS 管，两者漏极相互连接==)，高电平由 VDD 决定，低电平由 VSS 决定
- 当给高电平时，N-MOS 导通，P-MOS 截止，IO 口输出低电平；当给低电平时，N-MOS 截止，P-MOS 导通，IO 口输出高电平

##### 2.2.3 复用开漏输出/复用推挽输出

不使用单片机内部输出信号，通过复用将所需输出信号转移到其他外设上输出，即需要输出的信号源由单片机内部变为其他外设
